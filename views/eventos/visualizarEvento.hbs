<div class="visualizar-evento-container">

  <section class="titulo-evento">
    <a href="/eventos" class="btn-voltar-topo">‚Üê Voltar</a>
    <h1>{{nomeEvento}}</h1>

    {{#if (eq evento.status "planejado")}}
      <a href="/eventos/editar/{{evento.id}}" class="btn-editar-topo">Editar Evento</a>
    {{else}}
      <a class="btn-editar-topo" 
        style="opacity: .35; cursor: not-allowed; pointer-events: none;">
        Editar Evento
      </a>
    {{/if}}
  </section>


  <section class="servicos-visualizacao">

    {{!-- ================================
         BOT√ÉO ADICIONAR SERVI√áO
         aparece somente se status = planejado
       ================================= --}}
    {{#if (eq evento.status "planejado")}}
      <div class="servico-card">
        <div class="servico-esquerda">
          <a href="/eventos/{{evento.id}}/adicionar-servicos" class="servico-link">
            <div class="servico-img" title="Adicionar novos servi√ßos">+</div>
          </a>
          <div class="servico-info">
            <h2>Adicionar Servi√ßo</h2>
            <p>Clique no + para buscar mais op√ß√µes</p>
          </div>
        </div>
      </div>
    {{/if}}

    {{!-- =================================
         LISTA DOS SERVI√áOS DO EVENTO
       ================================= --}}
    {{#each servicos}}
      <div class="servico-card">
        <div class="servico-esquerda">
          <div class="servico-img">
            {{#if this.imagens.[0]}}
              <img src="{{this.imagens.[0]}}" alt="Foto">
            {{else}}
              <span style="font-size:12px; color:#555;">Sem foto</span>
            {{/if}}
          </div>

          <div class="servico-info">
            <span class="categoria-badge">{{this.categoriaLabel}}</span>
            <h2>{{this.nome}}</h2>
            <p>{{this.descricao}}</p>
          </div>
        </div>

        <div class="servico-direita">
          <span>R$ {{this.preco}}</span>

          {{!-- remover s√≥ se permitido (j√° fizemos antes) --}}

          {{#unless (eq ../evento.status "andamento")}}
            <button class="delete-btn" title="Remover (N√£o implementado)">üóëÔ∏è</button>
          {{/unless}}

          {{!-- ===============================
              BOT√ÉO AVALIAR ‚Äî somente FINALIZADO
            =============================== --}}
          {{#if (eq ../evento.status "finalizado")}}
            <a href="/eventos/{{../evento.id}}/avaliar/{{this.id}}" 
              class="btn-avaliar"
              style="margin-left:10px; padding:6px 10px; background:#4CAF50; color:white; border-radius:5px;">
              Avaliar
            </a>
          {{/if}}
        </div>

      </div>
    {{/each}}
    
  </section>

  <footer class="total-footer">
    <button class="btn-total">TOTAL R$ {{total}}</button>
  </footer>

</div>
